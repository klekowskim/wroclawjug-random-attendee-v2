(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(69)},28:function(e,t,n){},29:function(e,t){},37:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),i=n.n(c),o=(n(28),n(9)),l=n(1),u=n(2),s=n(5),m=n(4),d=n(6),v=n(7),h=n.n(v),p=(n(37),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault();var t=n.state,a=t.clientId,r=t.clientSecret;n.props.onSubmit({clientId:a,clientSecret:r})},n.onClientIdChange=function(e){n.setState({clientId:e.target.value})},n.onClientSecretChange=function(e){n.setState({clientSecret:e.target.value})},n.state={clientId:"",clientSecret:""},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.clientId,n=e.clientSecret;return r.a.createElement("div",{className:"ClientForm"},r.a.createElement("form",{onSubmit:this.onSubmit,autoComplete:"off"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"clientId"},"Client id"),r.a.createElement("input",{type:"text",id:"clientId",name:"clientId",value:t,onChange:this.onClientIdChange,"data-lpignore":"true"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"clientSecret"},"Client secret"),r.a.createElement("input",{type:"password",id:"clientSecret",name:"clientSecret",value:n,onChange:this.onClientSecretChange,"data-lpignore":"true"})),r.a.createElement("button",{type:"submit"},"Log in")))}}]),t}(r.a.Component)),f={accessTokenUri:"https://secure.meetup.com/oauth2/access",authorizationUri:"https://secure.meetup.com/oauth2/authorize",redirectUri:"klekowskim.github.io/wroclawjug-random-attendee-v2",scopes:["basic"]},b=r.a.createContext(null),E=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).onFormSubmit=function(e){n.meetupClient=new h.a(Object(o.a)({clientId:e.clientId,clientSecret:e.clientSecret},f)),window.open(n.meetupClient.token.getUri(),"_self")},n.readAccessTokenFromUrl=function(){var e=location.href;location.hash="",n.meetupClient.token.getToken(e).then(function(e){n.setState({accessToken:e.accessToken,tokenType:e.tokenType,expires:e.expires})},function(e){console.error(e)})},n.isLoggedIn=function(){var e=n.state,t=e.accessToken,a=e.expires;return null!==t&&a>new Date},n.state={accessToken:null,tokenType:null,expires:null},n.meetupClient=new h.a(Object(o.a)({clientId:null,clientSecret:null},f)),n.readAccessTokenFromUrl(),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){if(!this.isLoggedIn())return r.a.createElement(p,{onSubmit:this.onFormSubmit});var e=this.state,t=e.accessToken,n=e.tokenType;return r.a.createElement(b.Provider,{value:{accessToken:t,tokenType:n}},this.props.children)}}]),t}(r.a.Component),k=n(22),g=n.n(k),j=n(8),O=n.n(j),C="https://api.meetup.com/WroclawJUG",S=function(){function e(t,n){if(Object(l.a)(this,e),"bearer"!==n)throw new Error("Token type ".concat(n," not supported"));this.axios=g.a.create({baseURL:C,headers:{Authorization:"Bearer ".concat(t)}})}return Object(u.a)(e,[{key:"getEvents",value:function(){var e=O.a.stringify({scroll:"recent_past"});return this.axios.get("/events?".concat(e)).then(function(e){return e.data})}},{key:"getAttendees",value:function(e){var t=O.a.stringify({});return this.axios.get("/events/".concat(e.id,"/attendance?").concat(t)).then(function(e){return e.data.filter(function(e){return"yes"===e.rsvp.response})})}}]),e}(),y=r.a.createContext(null),w=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(b.Consumer,null,function(t){var n=t?new S(t.accessToken,t.tokenType):null;return r.a.createElement(y.Provider,{value:n},e.props.children)})}}]),t}(r.a.Component);n(66);var T=function(e){var t=e.children;return r.a.createElement("div",{className:"Container"},t)};n(67);var I=function(e){var t=e.children;return r.a.createElement("div",{className:"LeftColumn"},t)};n(68);var x=function(e){var t=e.children;return r.a.createElement("div",{className:"RightColumn"},t)};function U(e){return function(t){return r.a.createElement(y.Consumer,null,function(n){return r.a.createElement(e,Object.assign({api:n},t))})}}var F=U(function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={events:[]},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.api.getEvents().then(function(t){e.setState({events:t})})}},{key:"render",value:function(){var e=this,t=this.state.events;return r.a.createElement("div",null,t.map(function(t){return r.a.createElement("div",{key:t.id},r.a.createElement("span",{onClick:function(){e.props.onSelect(t)}},t.name))}))}}]),t}(r.a.Component)),N=U(function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={attendees:[],winners:[]},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.api,a=t.event;n.getAttendees(a).then(function(t){e.setState({attendees:t})})}},{key:"render",value:function(){var e=this.state.attendees;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("span",null,"Number of attendees:"),r.a.createElement("span",null,e.length)),r.a.createElement("div",null))}}]),t}(r.a.Component)),A=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).onEventSelect=function(e){n.setState({selectedEvent:e})},n.state={selectedEvent:null,attendees:[]},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.selectedEvent;return r.a.createElement(T,null,r.a.createElement(I,null,null!==e&&r.a.createElement("div",null,r.a.createElement("div",null,"Selected event:"),r.a.createElement("div",null,e.name))),r.a.createElement(x,null,null===e&&r.a.createElement(F,{onSelect:this.onEventSelect}),null!==e&&r.a.createElement(N,{event:e})))}}]),t}(r.a.Component);var L=function(){return r.a.createElement(E,null,r.a.createElement(w,null,r.a.createElement(A,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,1,2]]]);
//# sourceMappingURL=main.f2ece283.chunk.js.map