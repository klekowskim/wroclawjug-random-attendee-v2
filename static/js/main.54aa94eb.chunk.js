(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(70)},27:function(e,t,n){},28:function(e,t){},36:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),i=n.n(c),l=(n(27),n(11)),o=n(1),s=n(2),u=n(4),m=n(3),d=n(5),h=n(9),v=n.n(h),f=(n(36),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault();var t=n.state,a=t.clientId,r=t.clientSecret;n.props.onSubmit({clientId:a,clientSecret:r})},n.onClientIdChange=function(e){n.setState({clientId:e.target.value})},n.onClientSecretChange=function(e){n.setState({clientSecret:e.target.value})},n.state={clientId:"",clientSecret:""},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.clientId,n=e.clientSecret;return r.a.createElement("div",{className:"ClientForm"},r.a.createElement("form",{onSubmit:this.onSubmit,autoComplete:"off"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"clientId"},"Client id"),r.a.createElement("input",{type:"text",id:"clientId",name:"clientId",value:t,onChange:this.onClientIdChange,"data-lpignore":"true"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"clientSecret"},"Client secret"),r.a.createElement("input",{type:"password",id:"clientSecret",name:"clientSecret",value:n,onChange:this.onClientSecretChange,"data-lpignore":"true"})),r.a.createElement("button",{type:"submit"},"Log in")))}}]),t}(r.a.Component)),p={accessTokenUri:"https://secure.meetup.com/oauth2/access",authorizationUri:"https://secure.meetup.com/oauth2/authorize",redirectUri:"https://klekowskim.github.io/wroclawjug-random-attendee-v2",scopes:["basic"]},b=r.a.createContext(null),E=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onFormSubmit=function(e){n.meetupClient=new v.a(Object(l.a)({clientId:e.clientId,clientSecret:e.clientSecret},p)),window.open(n.meetupClient.token.getUri(),"_self")},n.readAccessTokenFromUrl=function(){var e=location.href;location.hash="",n.meetupClient.token.getToken(e).then(function(e){n.setState({accessToken:e.accessToken,tokenType:e.tokenType,expires:e.expires})},function(e){console.error(e)})},n.isLoggedIn=function(){var e=n.state,t=e.accessToken,a=e.expires;return null!==t&&a>new Date},n.state={accessToken:null,tokenType:null,expires:null},n.meetupClient=new v.a(Object(l.a)({clientId:null,clientSecret:null},p)),n.readAccessTokenFromUrl(),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){if(!this.isLoggedIn())return r.a.createElement(f,{onSubmit:this.onFormSubmit});var e=this.state,t=e.accessToken,n=e.tokenType;return r.a.createElement(b.Provider,{value:{accessToken:t,tokenType:n}},this.props.children)}}]),t}(r.a.Component),k=n(21),j=n.n(k),O=n(10),g=n.n(O),w="https://api.meetup.com/WroclawJUG",C=function(){function e(t,n){if(Object(o.a)(this,e),"bearer"!==n)throw new Error("Token type ".concat(n," not supported"));this.axios=j.a.create({baseURL:w,params:{access_token:t}})}return Object(s.a)(e,[{key:"getEvents",value:function(){var e=g.a.stringify({scroll:"recent_past"});return this.axios.get("/events?".concat(e)).then(function(e){return e.data})}},{key:"getAttendees",value:function(e){var t=g.a.stringify({});return this.axios.get("/events/".concat(e.id,"/attendance?").concat(t)).then(function(e){return e.data.filter(function(e){return"yes"===e.rsvp.response})})}}]),e}(),S=r.a.createContext(null),y=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(b.Consumer,null,function(t){var n=t?new C(t.accessToken,t.tokenType):null;return r.a.createElement(S.Provider,{value:n},e.props.children)})}}]),t}(r.a.Component);n(66);var T=function(e){var t=e.children;return r.a.createElement("div",{className:"Container"},t)};n(67);var I=function(e){var t=e.children;return r.a.createElement("div",{className:"LeftColumn"},t)};n(68);var F=function(e){var t=e.children;return r.a.createElement("div",{className:"RightColumn"},t)};function x(e){return function(t){return r.a.createElement(S.Consumer,null,function(n){return r.a.createElement(e,Object.assign({api:n},t))})}}var P=x(function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={events:[]},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.api.getEvents().then(function(t){e.setState({events:t})})}},{key:"render",value:function(){var e=this,t=this.state.events;return r.a.createElement("div",null,t.map(function(t){return r.a.createElement("div",{key:t.id},r.a.createElement("span",{onClick:function(){e.props.onSelect(t)}},t.name))}))}}]),t}(r.a.Component)),A=n(7),L=(n(69),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.attendee,n=e.onClose;return r.a.createElement("div",{className:"FullMemberPreview",onClick:n},r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{src:t.member.photo.highres_link,alt:t.member.name})),r.a.createElement("h3",null,t.member.name))}}]),t}(r.a.Component)),N=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).showFullPreview=function(){n.setState({fullPreviewVisible:!0})},n.hideFullPreview=function(){n.setState({fullPreviewVisible:!1})},n.state={fullPreviewVisible:!1},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.attendee;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onClick:this.showFullPreview},r.a.createElement("div",null,r.a.createElement("img",{src:e.member.photo.thumb_link,alt:e.member.name})),e.member.name),this.state.fullPreviewVisible&&r.a.createElement(L,{attendee:e,onClose:this.hideFullPreview}))}}]),t}(r.a.Component);var R=x(function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).randomAttendee=function(){var e=n.state,t=e.attendeesToRandom,a=e.winners;if(t.length>0){var r=function(e){console.log(">random from 0 to ",e);var t=Math.floor(Math.random()*e-1)+1;return console.log(">result",t),t}(t.length);n.setState({attendeesToRandom:[].concat(Object(A.a)(t.slice(0,r)),Object(A.a)(t.slice(r+1,t.length))),winners:[].concat(Object(A.a)(a),[t[r]])})}},n.clear=function(){n.setState({attendeesToRandom:Object(A.a)(n.state.attendees),winners:[],losers:[]})},n.markLastAttendeeAsLooser=function(){var e=n.state,t=e.winners,a=e.losers;t.length>0&&n.setState({winners:t.slice(0,-1),losers:[].concat(Object(A.a)(a),[t[t.length-1]])})},n.state={attendees:[],attendeesToRandom:[],winners:[],losers:[]},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.api,a=t.event;n.getAttendees(a).then(function(t){e.setState({attendees:t,attendeesToRandom:Object(A.a)(t)})})}},{key:"render",value:function(){var e=this.state,t=e.attendees,n=e.winners,a=e.losers;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("span",null,"Number of attendees:"),r.a.createElement("span",null,t.length)),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.randomAttendee},"Random attendee"),r.a.createElement("button",{onClick:this.clear},"Clear"),r.a.createElement("button",{onClick:this.markLastAttendeeAsLooser},"Last not present")),r.a.createElement("div",null,r.a.createElement("div",null,"Winners:"),r.a.createElement("div",null,n.map(function(e){return r.a.createElement(N,{attendee:e,key:e.member.id})})),r.a.createElement("div",null,"Guys who missed their opportunity :):"),r.a.createElement("div",null,a.map(function(e){return r.a.createElement(N,{attendee:e,key:e.member.id})}))))}}]),t}(r.a.Component)),U=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onEventSelect=function(e){n.setState({selectedEvent:e})},n.state={selectedEvent:null,attendees:[]},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.selectedEvent;return r.a.createElement(T,null,r.a.createElement(I,null,null!==e&&r.a.createElement("div",null,r.a.createElement("div",null,"Selected event:"),r.a.createElement("div",null,e.name))),r.a.createElement(F,null,null===e&&r.a.createElement(P,{onSelect:this.onEventSelect}),null!==e&&r.a.createElement(R,{event:e})))}}]),t}(r.a.Component);var M=function(){return r.a.createElement(E,null,r.a.createElement(y,null,r.a.createElement(U,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.54aa94eb.chunk.js.map